<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>VOVOTINA — Início</title>

  <!-- Fontes -->
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600&family=Open+Sans:wght@300;400;600&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="paginaPrincipal.css" />
</head>
<body>
  <header class="topbar">
    <nav class="nav">
      <div class="brand">
        <div class="logo-text">VOVOTINA</div>
        <div class="tag">SUA ROTINA MAIS PRÁTICA</div>
      </div>
      <ul class="nav-actions">
        <a href="index.html">Início</a>
        <li><button id="btn-chat" class="nav-btn">CHAT</button></li>
        <li><button id="btn-profile" class="icon-btn" title="Perfil">☻</button></li>
      </ul>
    </nav>
  </header>

<main class="container">
  <!-- MEDICAMENTOS -->
  <a href="medicamentos.html" class="card-link">
    <section class="card meds">
      <h3 class="section-title">MEDICAMENTOS:</h3>
      <div class="med-box">
        <div class="med-next">próximo alarme...</div>
        <div class="med-name">Enalapril</div>
        <div class="med-time">12:00 - 18:00</div>
      </div>
    </section>
  </a>
</main>


    <!-- CONTEÚDOS DIDÁTICOS -->
    <section class="card contents">
      <h3 class="section-title">CONTEÚDOS DIDÁTICOS</h3>
      <div class="content-grid">
        <article class="content-card">
          <input type="file" class="file-input" hidden accept="image/*,application/pdf">
          <img alt="exemplo app" src="https://via.placeholder.com/120x90?text=Enviar">
          <div class="content-caption">MANEIRA 1</div>
        </article>

        <article class="content-card">
          <input type="file" class="file-input" hidden accept="image/*,application/pdf">
          <img alt="segurança online" src="https://via.placeholder.com/120x90?text=Enviar">
          <div class="content-caption">MANEIRA 2</div>
        </article>

        <article class="content-card">
          <input type="file" class="file-input" hidden accept="image/*,application/pdf">
          <img alt="redes sociais" src="https://via.placeholder.com/120x90?text=Enviar">
          <div class="content-caption">MANEIRA 3</div>
        </article>
      </div>
    </section>

    <!-- MAPA -->
    <section class="card map-card">
      <h3 class="section-title">MAPA</h3>
      <div class="map-frame">
        <iframe
          id="gmap"
          src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3444.95877252834!2d-51.17813968487613!3d-29.826329982080844!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x951b7b17d7b4f7b1%3A0x9a5ec6a4b2f0f8b6!2sUniversidade%20do%20Vale%20do%20Rio%20dos%20Sinos!5e0!3m2!1spt-BR!2sbr!4v1600000000000!5m2!1spt-BR!2sbr"
          width="100%" height="240" style="border:0;" allowfullscreen="" loading="lazy">
        </iframe>
      </div>
    </section>
  </main>

  <footer class="footer">
    <div class="contact">vovotina@gmail.com | (51) 99999-9999</div>
    <div class="footer-icons">♿ ❤ ☎</div>
  </footer>

  <script src="/socket.io/socket.io.js"></script>
  <script src="client.js"></script>

  <!-- SCRIPT DE UPLOAD -->
  <script>
  // Quando clicar na imagem, abre o seletor de arquivo
  document.querySelectorAll('.content-card img').forEach(img => {
    img.addEventListener('click', () => {
      img.previousElementSibling.click();
    });
  });

  // Quando o arquivo for escolhido, envia pro servidor
  document.querySelectorAll('.file-input').forEach(input => {
    input.addEventListener('change', async e => {
      const file = e.target.files[0];
      if (!file) return;

      const formData = new FormData();
      formData.append('file', file);

      try {
        const res = await fetch('/upload', { method: 'POST', body: formData });
        const data = await res.json();

        if (data.success) {
          const img = e.target.nextElementSibling;

          // Se for PDF, mostra um ícone genérico
          if (file.type === 'application/pdf') {
            img.src = 'https://cdn-icons-png.flaticon.com/512/337/337946.png'; // ícone PDF
            img.alt = 'Arquivo PDF enviado';
          } else {
            img.src = data.url; // mostra imagem enviada
          }
        } else {
          alert('Erro ao enviar: ' + data.message);
        }
      } catch (err) {
        alert('Erro ao conectar com o servidor');
        console.error(err);
      }
    });
  });
  </script>
</body>
</html>
